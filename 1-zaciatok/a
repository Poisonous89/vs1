#include <Wire.h>
#include <LiquidCrystal_I2C.h>

LiquidCrystal_I2C lcd(0x27, 16, 2);

int segPins[7] = {2, 3, 4, 5, 6, 7, 8};
byte segPatterns[4][7] = {
  {1,1,1,1,1,1,0}, // 1 (A)
  {0,1,1,1,1,1,1}, // 2 (J)
  {1,1,1,1,0,0,1}, // 3 (Q)
  {1,1,1,0,0,1,1}  // 4 (K)
};
char cards[4] = {'A', 'J', 'Q', 'K'};

int buttonPin = 9;
int last = -1;

void setup() {
  lcd.init();
  lcd.backlight();
  Serial.begin(9600);

  for (int i = 0; i < 7; i++) pinMode(segPins[i], OUTPUT);
  pinMode(buttonPin, INPUT_PULLUP);

  randomSeed(analogRead(A0));
  lcd.print("Press button");
}

void loop() {
  if (digitalRead(buttonPin) == LOW) {
    delay(200); // debounce

    int i;
    do i = random(4); while (i == last);
    last = i;

    char c = cards[i];
    lcd.clear();
    lcd.print("Card: ");
    lcd.print(c);
    Serial.println(c);

    for (int j = 0; j < 7; j++)
      digitalWrite(segPins[j], segPatterns[i][j]);

    while (digitalRead(buttonPin) == LOW); // wait for release
  }
}